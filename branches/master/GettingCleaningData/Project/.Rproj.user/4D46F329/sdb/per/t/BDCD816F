{
    "contents" : "---\ntitle: \"CodeBook\"\noutput: html_document\n---\n\nThis is an R Markdown document CodeBook that describes the R script, source data, and output in detail.\n\n<b>Source Data</b>\nThe source data and original dataset description can be found at\n\n<http://archive.ics.uci.edu/ml/datasets/Human+Activity+Recognition+Using+Smartphones>.\n\n<b>run_analysis.R</b>\n\nA. The initial steps are to load libraries and features data.\n\n```{r}\n###############################################\n#\n# Libraries\n#\n###############################################\nlibrary(reshape2)\n\n###############################################\n#\n# Load features data.\n#\n###############################################\n\nsetwd(\"UCI HAR Dataset\")\nfeatures <- read.table(\"features.txt\", header=FALSE)\nfeatures.colnames <- features$V2\nxtrain <- read.table(\"train/X_train.txt\", header=FALSE, col.names=features.colnames)\nxtest <- read.table(\"test/X_test.txt\", header=FALSE, col.names=features.colnames)\nfeatures <- rbind(xtrain, xtest)\n```\n\nB. Data transformation as per Project Requirements\n\n\n```{r}\n\n###############################################\n#\n# 2. Extracts only the measurements on the mean and standard deviation for each measurement. \n#\n###############################################\nfeatures <- features[, grep(\".*\\\\.(mean|std)\\\\.\\\\..*\", names(features), value=T)]\n\nsubjects.colnames <- c(\"subject\")\nsubjecttrain <- read.table(\"train/subject_train.txt\", header=FALSE, col.names=subjects.colnames)\nsubjecttest <- read.table(\"test/subject_test.txt\", header=FALSE, col.names=subjects.colnames)\n\nsubjects <- rbind(subjecttrain, subjecttest)\n\nactivities.colnames <- c(\"activity\")\nactivitytrain <- read.table(\"train/y_train.txt\", header=FALSE, col.names=activities.colnames)\nactivitytest <- read.table(\"test/y_test.txt\", header=FALSE, col.names=activities.colnames)\n\nactivities <- rbind(activitytrain, activitytest)\n\n\n###############################################\n#\n# 2. Uses descriptive activity names to name the activities in the data set\n#\n###############################################\nactivity.labels <- read.table(\"activity_labels.txt\", header=FALSE, col.names=c(\"activity\", \"activityName\"))\nactivities <- merge(activities, activity.labels, by=\"activity\", sort=F)\nsubject.activities <- cbind(subjects, data.frame(activity = activities$activityName))\n\n###############################################\n#\n# 1. Merges the training and the test sets to create one data set.\n#\n###############################################\ndf <- cbind(features, subject.activities)\n\n###############################################\n#\n# 4. Appropriately labels the data set with descriptive variable names. \n#\n###############################################\ncolnames(df) <- tolower(str_replace_all(colnames(df), \"([A-Z]{1})\", \".\\\\1\"))\ncolnames(df) <- str_replace_all(colnames(df), \"[\\\\.]+\", \".\")\ncolnames(df) <- str_replace_all(colnames(df), \"[\\\\.]+$\", \"\") # extra dot at the end of the string\n\ntidy <- df[0,]\ntidy[1,] <- rep(NA, 68)\n\nmelted <- melt(df, id=c(\"subject\",\"activity\"))\n\n```\n\nC. Create tiny data set.\n\n```{r}\n\n###############################################\n#\n# 5. From the data set in step 4, creates a second, independent tidy data set with \n#    the average of each variable for each activity and each subject.\n#\n###############################################\nfor(subj in unique(melted$subject)){\n  means <- c()\n  for(acti in unique(melted[melted$subject == subj,]$activity)){\n    for(vari in unique(melted[melted$subject == subj,]$variable)){\n      m <- mean(melted[melted$subject == subj & melted$activity == acti & melted$variable == vari,]$value)\n      means <- append(means, as.numeric(m))\n    }\n    means <- append(means, subj)\n    means <- append(means, acti)\n    tidy <- rbind(tidy, means)\n  }\n}\n\n# remove the first N/A row\ntidy <- na.omit(tidy)\n\n# re-orderding of columns: first subject, then activity, then the values\ntidy <- tidy[,c(67,68, 1:66)]\n\n```\n\nD. Write output CSV file of tiny data set.\n\n```{r}\n\nwrite.table(tidy, file=\"tidymeans.txt\", quote=FALSE)\n```\n",
    "created" : 1440375009103.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3506059726",
    "id" : "BDCD816F",
    "lastKnownWriteTime" : 1440375804,
    "path" : "~/R/JohnsHopkins/GettingCleaningData/Project/CodeBook.Rmd",
    "project_path" : "CodeBook.Rmd",
    "properties" : {
        "tempName" : "Untitled3"
    },
    "relative_order" : 5,
    "source_on_save" : false,
    "type" : "r_markdown"
}